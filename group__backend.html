<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>frozen: Backends</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">frozen
   &#160;<span id="projectnumber">1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Backends</div>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__benchmark.html">backend/benchmark</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__call.html">backend/call</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__end.html">backend/end</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__morph.html">backend/morph</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__pool.html">backend/pool</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__rebuild.html">backend/rebuild</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__wrapper.html">backend/wrapper</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__cache.html">cache/cache</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__ipc.html">communication/ipc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__kill.html">daemon/kill</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__thread.html">daemon/thread</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__convert.html">data/convert</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__incapsulate.html">data/incapsulate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__list.html">data/list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__regexp.html">data/regexp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__split.html">data/split</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__structs.html">data/structs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__transfer.html">data/transfer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__jenkins.html">hash/jenkins</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__murmur.html">hash/murmur</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__fill.html">index/fill</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__hashtable.html">index/hashtable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__lookup.html">index/lookup</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__mphf.html">index/mphf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__stdin.html">io/stdin</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__stdout.html">io/stdout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__stderr.html">io/stderr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__fuse.html">io/fuse</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__tcp.html">io/tcp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__assign.html">request/assign</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__balancer.html">request/balancer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__debug.html">request/debug</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__emitter.html">request/emitter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__implode.html">request/implode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__explode.html">request/explode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__iterate.html">request/iterate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__rewrite.html">request/rewrite</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__switch.html">request/switch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__file.html">storage/file</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__pointers.html">storage/pointers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__mutex.html">sync/mutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__mongrel2.html">module/c_mongrel2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mod__backend__zmq.html">module/c_zmq</a></td></tr>
</table>


<h3><a class="anchor" id="backend_overview"></a>Backends overview</h3><div class="textblock"><p>Every user request processed by one backend, or by backend chain. Backend can perform various actions: </p>
<ul>
<li>interact with external things, such as files, sockets, etc </li>
<li>interact with internal things, with another backends, data </li>
<li>can read, write and modify request's values</li>
</ul>
<p>If user request is too complex for one backend, it can be processed with chain of backends. Chain of backends process user request step by step. One backend in such chain can modify request in way another backend can understand it. Another backends can do, as we already know, external things, for example write user data to file.</p>
<p>There is several types of requests and corresponding apis. Details described in api section. </p>
</div>

<h3><a class="anchor" id="backend_creation"></a>Creation and configuration</h3><div class="textblock"><p>To create new backend you have to know it's "class name". For example - "storage/file". It consist of category name (storage) and backend name (file). Categories introduced to group identical backends to one place. There is serveral important categories: request, storage, data, io. These categories represent most common used operations with user requests. </p>
<ul>
<li>request - modify, print, user request; change request path </li>
<li>storage - save and load user data from external storage </li>
<li>data - modify, pack/unpack, regexp user data from request </li>
<li>io - input and output from/to frozen, for example, fuse as filesystem for io There is more categories which is not listed.</li>
</ul>
<p>Almost every backend need some configuration variables to control it's behavior. They can be passed on new backend creation.</p>
<p>Currently you can't change configuration passed on step of creation, but after rewriting some of backends it can be possible. Example of correct configuration routines is backend "backend/factory". So, if func_configure of backend is reentrant and updates taken in account - you can change configuration in any time. </p>
</div>

<h3><a class="anchor" id="backend_requests"></a>Requests</h3><div class="textblock"><p>Then user request arrived, backend's handler is called. Backend can: </p>
<ul>
<li>return error or success code </li>
<li>read user request, check inputs, do something with it </li>
<li>pass user request to next backend(s) in chain </li>
<li>pass any request to next backend(s) in chain </li>
<li>etc...</li>
</ul>
<p>All of these actions is optional, even returning error or success. There is special error code -EEXIST, which indicates that backend don't want to modify current error code.</p>
<p>Internally all requests flow into some kind of recursive processing there each step is next backend. So, there is no such thing as async requests. Request considered finished then first backend return control to caller. But, async requests is too good to discard them, so you can use queue to save all requests and process them later, returning control almost immediatly. Of course, in such case, you should keep all data used in this request until this request will be really finished. </p>
</div>

<h3><a class="anchor" id="backend_childs"></a>Parents and childs</h3><div class="textblock"><p>Every backend, if this is not standalone backend, can have their parent(s) and child(s). Parent backend can pass to your backend requests. Childs is backends to which your backend can pass request. If backend have more than one child, request passed to every child repeatedly. If this is not that you want - you can solve it with any of path rewriting backend. Such approach is useful, because you can add child to any backend and monitor requests passed by. This can be used in logging.</p>
<p>You can connect backends in any way you want, but there is one limit - if your configuration produce infinity loops they will not be terminated or avoided. However this is doesn't mean that you can't send requests to parent backends. Just make sure it will work. </p>
</div></div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 4 2012 16:10:49 for frozen by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1</small></address>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7806052-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
