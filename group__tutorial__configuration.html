<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="keywords" content="frozen, data, processing, big data, daemon, fast, flexible"/>
<title>Frozen - flexible data processing daemon</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">frozen
   &#160;<span id="projectnumber">1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial: configuration</div>  </div>
<div class="ingroups"><a class="el" href="group__tutorial.html">Tutorials</a></div></div>
<div class="contents">
<h2><a class="anchor" id="tutorial_configuration_shop"></a>
Shop configuration</h2>
<p>To describe shop you want to build you should write configuration file. Configuration file syntax is simple and looks like JSON with some modifications. </p>
<div class="fragment"><pre class="fragment"> { &lt;machine 1 configuration&gt; },
 { &lt;machine 2 configuration&gt; },
 { &lt;machine 3 configuration&gt; },
 NULL,
 {
   &lt;machine 4 configuration&gt;
   duplicate_to = {                             <span class="comment">// this is configuration parameter name for imaginary duplicator machine</span>
     { &lt;machine 5 configuration&gt; },
     { &lt;machine 6 configuration&gt; },
     { &lt;machine 7 configuration&gt; },
   }
 }
</pre></div><p>This example configuration describe shops showed on picture in <a class="el" href="group__tutorial__basics.html">Tutorial: what is frozen?</a>.</p>
<p>NULL keyword used to split connection between machines - if there is no NULL - machine 3 would be connected to machine 4 from top and so on. But this behavior is wrong, so NULL keyword created. Unlike other common representation of graphs, we don't write connections between machines explicitly.</p>
<h2><a class="anchor" id="tutorial_configuration_machine"></a>
Machine configuration</h2>
<p>To configure single machine with required parameters you write all of them inside {} of machine configuration splitting by comma. </p>
<div class="fragment"><pre class="fragment"> {
    name      = <span class="stringliteral">&quot;some machine name&quot;</span>,                     <span class="comment">// single line comment</span>
    stringpar = <span class="stringliteral">&quot;some string value&quot;</span>,
    intpar    = (uint_t)<span class="stringliteral">&quot;12345&quot;</span>,
    otherpar  = (sometype_t)<span class="stringliteral">&quot;sometype configuration string&quot;</span>,
    morepar   = (sometype_t){
           value  = <span class="stringliteral">&quot;more parameters&quot;</span>,
           length = (uint_t)<span class="stringliteral">&quot;100&quot;</span>,
           nestedpar = (anothertype_t){
                size = (uint_t)<span class="stringliteral">&quot;100&quot;</span>
           }
    },
    envpar    = (<a class="code" href="structenv__t.html">env_t</a>)<span class="stringliteral">&quot;somekey&quot;</span>
 }
</pre></div><p> Here we have every possible parameter that can be passed to machine. There is strings, ints, special types, nested types: </p>
<ul>
<li>Already known name parameter is used by core to maintain global names </li>
<li>String parameter, can have "\t\r\n" inside string. </li>
<li>Integer parameter, here we have uint_t, it is current platform maximum integer size (4 bytes for 32-bits, 8 for 64-bits). You can specify <a class="el" href="group__uint8__t.html">uint8_t</a>, <a class="el" href="group__int16__t.html">int16_t</a> and another variations. </li>
<li>Some sometype_t data, which can be initialized from string. Examples: <a class="el" href="group__format__t.html">format_t</a>, <a class="el" href="group__hashkey__t.html">hashkey_t</a> </li>
<li>Some complex sometype_t data, which can be initialized from hash. Example: <a class="el" href="group__raw__t.html">raw_t</a>. </li>
<li>Environment data <a class="el" href="group__env__t.html">env_t</a>. It use current request key "somekey" to obtain data. Not every machine parameter can be used in such way. Machine must use this parameter during request and not in initialization stage.</li>
</ul>
<ul>
<li>You can use "=", "=&gt;", ":" as assignment. </li>
<li>Double or single quoted strings, @ or ## strings. </li>
<li>C-style comments, both single and multi-line.</li>
</ul>
<h2><a class="anchor" id="tutorial_configuration_m4"></a>
Macros and m4</h2>
<p>Because of simple nature of machines, writing complex systems become very hard. Too many machine need to shop together to achieve some feature. So, we need some macros. And very powerful thing in this field is m4. It is macro processor with simple syntax, easy to learn and easy to solve our problems. Refer to m4 manual to learn it.</p>
<p>It have includes, dynamic macro assignment, string manipulation and nice libraries.</p>
<p>Prev tutorial: <a class="el" href="group__tutorial__basics.html">Tutorial: what is frozen?</a></p>
<p>Next tutorial: <a class="el" href="group__tutorial__execution.html">Tutorial: starting daemon</a> </p>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 10 2012 21:54:35 for frozen by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1</small></address>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7806052-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
